cmake_minimum_required(VERSION 3.10)
# project declaration
project(YOLOv11TRT CXX)

# set C++ standard
set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)

# Find CUDA
find_package(CUDA REQUIRED)
if (NOT CUDA_FOUND)
    message(FATAL_ERROR "CUDA not found. Please install CUDA and try again.")
endif()

# Find OpenCV
find_Package(OpenCV REQUIRED)
if (NOT OpenCV_FOUND)
    message(FATAL_ERROR "OpenCV not found. Please install OpenCV and try again.")
endif()

# Find TensorRT
set(TENSORRT_PATH "D:/ThirdPart/TensorRT-10.8.0.43")


# Include directories
include_directories(${CMAKE_SOURCE_DIR}/include)

# Add executable target for YOLOv11TRT
add_executable(${PROJECT_NAME} 
    ${CMAKE_SOURCE_DIR}/main.cpp
    ${CMAKE_SOURCE_DIR}/src/yolov11.cpp
    )

# Include directories
target_include_directories(${PROJECT_NAME}
    PUBLIC
    ${CUDA_INCLUDE_DIRS}
    ${OpenCV_INCLUDE_DIRS}
    ${TENSORRT_PATH}/include
    )

# Link TensorRT libraries
set(TENSORRT_LIBS
    "${TENSORRT_PATH}/lib/nvinfer.lib"
    "${TENSORRT_PATH}/lib/nvonnxparser.lib"
    "${TENSORRT_PATH}/lib/nvparsers.lib"
    "${TENSORRT_PATH}/lib/nvinfer_plugin.lib"
    )

# Link libraries
target_link_directories(${PROJECT_NAME}
    PRIVATE
    ${CUDA_LIBRARIES}
    ${OpenCV_LIBS}
    ${TENSORRT_LIBS}
    )

